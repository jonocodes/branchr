<head>
  <title>Branchr</title>
</head>

<body>
  <!-- <h1>Branchr</h1> -->

  <div class="time">
    Server time: {{time}}
  </div>

  <h2>{{serviceName}} Branches</h2>

  <table>
    <tr><th>branch</th><th>last commit</th><th>actions</th>
      <th>watching</th><th>status</th></tr>
    {{#each branches}}
      {{> branchrow}}
    {{/each}}
  </table>

  <h2>Log</h2>
  {{#each log}}
    {{> logarea}}
  {{/each}}

</body>

<template name="branchrow">
  <tr>
    <td>{{branch}}</td>
    <td>
      <div class="commit">
      {{#with lastCommit}}
        {{checksum}}<br />
        {{author}}<br />
        {{date}}<br />
        {{title}}
      {{/with}}
      </div>
    </td>
    <td>
      {{#if running}}
        <button class="stop">stop</button>
      {{else}}
        <button class="start">start</button>
      {{/if}}

      <!-- <button class="enable">enable</button>
      <button class="disable">disable</button> -->

      <button class="log">log</button>
    </td>
    <td>
      <input type="checkbox" class="watchbox" checked="{{isWatching}}">
    </td>
    <td>
      {{status}}
      {{#if running}}
        <br /><a href={{url}}>{{url}}</a>
      {{/if}}
    </td>
  </tr>
</template>


<template name="logarea">
  Branch: {{branch}}
  <pre>{{log}}</pre>
  <!-- <pre id="errors">{{errors}}</pre> -->
</template>
