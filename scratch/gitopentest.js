var Git = require("nodegit");

// var dir = "/home/jono/files/branchr/nodegit";
var dir = "/home/jono/files/lcd-test-app";

Git.Repository.open(dir)
  .then(function(repository) {
    // console.log(repository);
    // console.log(repository.getBranchCommit("master"));
    return repository.getBranchCommit("master");
  })
  .then(function(commit) {
    console.log('commit');
    return commit.message();
  })
  .then(function(message) {
    console.log(message);
  });

Git.Repository.open(dir).
  then(function(repository) {
    console.log("getting iterator");
    return Git.Branch.iteratorNew(repository, GIT_BRANCH_LOCAL);
  })
  .then(function(branchIterator) {
    console.log('branchIterator : ');
    //
    // for(var value of branchIterator){
    //   console.log("I " + value)
    // }
  });

// Git.Repository.open(dir)
//   .then(function(repo) {
//     // console.log(repo);
//
//     repo.getStatus().then(function(statuses) {
//       function statusToText(status) {
//         var words = [];
//         if (status.isNew()) { words.push("NEW"); }
//         if (status.isModified()) { words.push("MODIFIED"); }
//         if (status.isTypechange()) { words.push("TYPECHANGE"); }
//         if (status.isRenamed()) { words.push("RENAMED"); }
//         if (status.isIgnored()) { words.push("IGNORED"); }
//
//         return words.join(" ");
//       }
//
//       statuses.forEach(function(file) {
//         console.log(file.path() + " " + statusToText(file));
//       });
//     });
//
//   })
//   .then(function(message) {
//     console.log(message);
//   });
